<!-- snippets\header-desktop-nav.liquid -->
{%- liquid
  unless limit
    assign limit = main_menu.links.size
  endunless
  unless offset
    assign offset = 0
  endunless
-%}

<ul
  class="site-nav site-navigation medium-down--hide"
>
  {%- for link in main_menu.links limit: limit offset: offset -%}
   
    {%- liquid
      assign has_dropdown = false
      assign is_megamenu = false
      if link.links != blank
        assign has_dropdown = true
      endif
      if has_dropdown
        for block in section.blocks
            assign lasttitle = link.title | handleize
            assign lastsemenu = block.settings.menu_item | handleize
          if lasttitle == lastsemenu
              assign is_megamenu02 = true
          endif 
          if link.title == block.settings.menu_item
            assign is_megamenu = true

            assign promo_image_1 = block.settings.promo_image_1
            assign promo_heading_1 = block.settings.promo_heading_1
            assign promo_text_1 = block.settings.promo_text_1
            assign promo_url_1 = block.settings.promo_url_1
            assign promo_image_2 = block.settings.promo_image_2
            assign promo_heading_2 = block.settings.promo_heading_2
            assign promo_text_2 = block.settings.promo_text_2
            assign promo_url_2 = block.settings.promo_url_2
            assign promo_image_3 = block.settings.promo_image_3
            assign promo_heading_3 = block.settings.promo_heading_3
            assign promo_text_3 = block.settings.promo_text_3
            assign promo_url_3 = block.settings.promo_url_3
            assign promo_image_4 = block.settings.promo_image_4
            assign promo_heading_4 = block.settings.promo_heading_4
            assign promo_text_4 = block.settings.promo_text_4
            assign promo_url_4 = block.settings.promo_url_4
            assign promo_image_5 = block.settings.promo_image_5
            assign promo_heading_5 = block.settings.promo_heading_5
            assign promo_text_5 = block.settings.promo_text_5
            assign promo_url_5 = block.settings.promo_url_5
            break
          endif
        endfor
      endif
    -%}
   {% assign flag_yanzheng = true %}
    {% for block in section.blocks %}

    {% if link.title == block.settings.menu_item and block.type == 'megamenu01' %} 
       {% assign flag_yanzheng = false %}
      <li class="site-nav__item site-nav__itemsty01 site-nav__expanded-item{% if has_dropdown %} site-nav--has-dropdown{% endif %}{% if is_megamenu %} site-nav--is-megamenu{% endif %}{% unless template == 'index' %}{% if link.active %} site-nav--active{% endif %}{% endunless %}">
      
      {% if is_megamenu or has_dropdown %}
        <div 
          id="site-nav-item--{{ forloop.index }}"
          class="site-nav__details"
        >
          <summary
            aria-expanded="false"
            aria-controls="site-nav-item--{{ forloop.index }}"
            class="site-nav__link site-nav__link--underline{% if has_dropdown %} site-nav__link--has-dropdown{% endif %}"
          >
            <a href="{{ link.url }}">{{ link.title }}</a>
        {%- if link.title == 'Special Offer' -%}
            <!-- <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon--wide icon-chevron-down" viewBox="0 0 28 16"><path d="M1.57 1.59l12.76 12.77L27.1 1.59" stroke-width="2" stroke="#000" fill="none" fill-rule="evenodd"/></svg> -->
             <span class="has_colorpointer"></span>
          {%- endif -%}
          </summary>
      {% else %}
        <a
          href="{{ link.url }}"
          class="site-nav__link{% if has_dropdown %} site-nav__link--has-dropdown{% endif %}"
        >
          {{ link.title }}
        </a>
      {% endif %}

        {%- assign columns = 1 -%}
        <div class="site-nav__dropdown megamenu text-left site-nav__dropdown_sty01">
 
                <div class="megamenu__sty01">
                  <div class="megamenu__sty01-left">
                  {%- for childlink in link.links -%}
                    <div class="megasty01-leftconbox">
                    <div class="megamenu__col-title animate-cssele appear-delay-1 {% if forloop.first %}active{% endif %}">
                      <a href="{{ childlink.url }}" class="megamenu__sty01-leftlink">
                          {{ childlink.title }} {% if childlink.links != blank %}<svg width="6" height="10" viewBox="0 0 6 10" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 1L5 5L1 9" stroke="currentColor"/></svg>{% endif %}
                      </a>
                    </div> 

                    {%- liquid
                      if childlink.levels > 0
                        assign previous_column_type = 'full'
                      else
                        assign previous_column_type = 'single'
                      endif
                    -%} 
                    
                    <div class="megamenu__col-contents animate-cssele appear-delay-2 {% if forloop.first %}active{% endif %}">
                    <div class="megamenu__col-contopbar">
                    {% if childlink.object.metafields.custom.nav_text %}
                      {{ childlink.object.metafields.custom.nav_text.value }} <a href="{{ childlink.url }}">View All<svg width="6" height="10" viewBox="0 0 6 10" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 1L5 5L1 9" stroke="currentColor"/></svg></a>
                    {% else %}
                      Network SIM Card <a href="{{ childlink.url }}">View All<svg width="6" height="10" viewBox="0 0 6 10" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 1L5 5L1 9" stroke="currentColor"/></svg></a>
                    {% endif %}
                      </div>
                    <div class="megamenu__col-conitem">
                    {%- for grandchildlink in childlink.links -%}
                      <a href="{{ grandchildlink.url }}" class="mecol-conitemlink">
                       <img src="{% if grandchildlink.object.metafields.custom.nav_image %}{{ grandchildlink.object.metafields.custom.nav_image | img_url:'' }}{% else %}{{ grandchildlink.object.featured_image | img_url:'' }}{% endif %}" alt="{{ grandchildlink.title }}"/>
                        <div class="mecol-conitemtitle">{% if grandchildlink.object.metafields.custom.short_title != blank %}{{ grandchildlink.object.metafields.custom.short_title }}{% else %}{{ grandchildlink.title }}{% endif %}</div>{% if grandchildlink.object.tags contains 'new' or grandchildlink.object.tags contains 'New' %}<b>New</b>{% endif %}
                      </a>
                    {%- endfor -%}
                    </div>
                    
                    </div>
                    </div>
                  {%- endfor -%}
                </div>
                    <div class="megamenu__sty01-right"></div>
                </div>
        </div>


      {% if is_megamenu or has_dropdown %}
        </div>
      {% endif %}      
     
    </li>
      
    {% elsif link.title == block.settings.menu_item and block.type == 'megamenu02' %} 
          {% assign flag_yanzheng = false %}
      <li class="site-nav__item site-nav__itemsty01 site-nav__expanded-item{% if has_dropdown %} site-nav--has-dropdown{% endif %}{% if is_megamenu %} site-nav--is-megamenu{% endif %}{% unless template == 'index' %}{% if link.active %} site-nav--active{% endif %}{% endunless %}">
      
      {% if is_megamenu or has_dropdown %}
        <div 
          id="site-nav-item--{{ forloop.index }}"
          class="site-nav__details"
        >
          <summary
            aria-expanded="false"
            aria-controls="site-nav-item--{{ forloop.index }}"
            class="site-nav__link site-nav__link--underline{% if has_dropdown %} site-nav__link--has-dropdown{% endif %}"
          >
            <a href="{{ link.url }}">{{ link.title }}</a>
        {%- if link.title == 'Special Offer' -%}
            <!-- <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon--wide icon-chevron-down" viewBox="0 0 28 16"><path d="M1.57 1.59l12.76 12.77L27.1 1.59" stroke-width="2" stroke="#000" fill="none" fill-rule="evenodd"/></svg> -->
          <span class="has_colorpointer"></span>
          {%- endif -%}
          </summary>
      {% else %}
        <a
          href="{{ link.url }}"
          class="site-nav__link{% if has_dropdown %} site-nav__link--has-dropdown{% endif %}"
        >
          {{ link.title }}
        </a>
      {% endif %}

        {%- assign columns = 1 -%}
        <div class="site-nav__dropdown megamenu text-left site-nav__dropdown_sty01 site-nav__dropdown_sty02">
 
                <div class="megamenu__sty01">
                  <div class="megamenu__sty01-left ">
                  {%- for childlink in link.links -%}
                    <div class="megasty01-leftconbox">
                    <div class="megamenu__col-title {% if forloop.first %}active{% endif %}">
                      <a href="{{ childlink.url }}" class="megamenu__sty01-leftlink animate-cssele  appear-delay-1">
                          {{ childlink.title }} 
                      </a>
                    <div class="changenav02_box">
                    {%- for grandchildlink in childlink.links -%}
                      <div class="nav02st-itemlink animate-cssele  appear-delay-1 {% if forloop.first %}active{% endif %}"><a href="{{ grandchildlink.url }}">
                       {{ grandchildlink.title }}{% if grandchildlink.object.metafields.custom.nav_collections01 != blank %}<svg width="6" height="10" viewBox="0 0 6 10" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 1L5 5L1 9" stroke="currentColor"/></svg>{% endif %}
                      </a></div>
                      {% if grandchildlink.object.metafields.custom.nav_collections01 %}
                    <div class="megamenu__col-contents animate-cssele appear-delay-2 {% if forloop.first %}active{% endif %}">
                    
                     {% assign nowcol = collections[grandchildlink.object.metafields.custom.nav_collections01] %} 
                      {% if nowcol %}
                      <div class="megamenu__col-contopbar">
                    {% if grandchildlink.object.metafields.custom.nav_collections01 %}
                     {{ collections[grandchildlink.object.metafields.custom.nav_collections01].title }} <a href="{{ grandchildlink.url }}">View All<svg width="6" height="10" viewBox="0 0 6 10" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 1L5 5L1 9" stroke="currentColor"/></svg></a>
                    {% endif %}
                    </div>
                    <div class="megamenu__col-conitem">
                    {%- for product in nowcol.products limit: 5 -%}
                      <a href="{{ product.url }}" class="mecol-conitemlink">
                       <img src="{{ product.featured_image | img_url:'200x' }}" alt="{{ product.title }}"/>
                        <div class="mecol-conitemtitle">{% if product.metafields.custom.short_title != blank %}{{ product.metafields.custom.short_title }}{% else %}{{ product.title }}{% endif %}</div>{% if product.tags contains 'new' or grandchildlink.object.tags contains 'New' %}<b>New</b>{% endif %}
                      </a>
                    {%- endfor -%}
                    </div>
                    {% endif %}
                      
                    {% assign nowcol02 = collections[grandchildlink.object.metafields.custom.nav_collections02] %} 
                     {% if nowcol02 %}
                   <div class="megamenu__col-contopbar megamenu__col-contopbar02">
                    
                    {% if grandchildlink.object.metafields.custom.nav_collections02 %}
                     {{ collections[grandchildlink.object.metafields.custom.nav_collections02].title }}
                    {% endif %}
                    </div>
                    <div class="megamenu__col-conitem">
                    {%- for product in nowcol02.products limit: 5  -%}
                      <a href="{{ product.url }}" class="mecol-conitemlink">
                       <img src="{{ product.featured_image | img_url:'200x' }}" alt="{{ product.title }}"/>
                        <div class="mecol-conitemtitle">{% if product.metafields.custom.short_title != blank %}{{ product.metafields.custom.short_title }}{% else %}{{ product.title }}{% endif %}</div>{% if product.tags contains 'new' or grandchildlink.object.tags contains 'New' %}<b>New</b>{% endif %}
                      </a>
                    {%- endfor -%}
                    </div>
                    {% endif %}
                      
                    </div>
                      {% endif %}
                    {%- endfor -%} 
                    </div>
                    </div> 

                    {%- liquid
                      if childlink.levels > 0
                        assign previous_column_type = 'full'
                      else
                        assign previous_column_type = 'single'
                      endif
                    -%} 
                    
                   
                    </div>
                  {%- endfor -%}
                </div>
                    <div class="megamenu__sty01-right"></div>
                </div>
        </div>


      {% if is_megamenu or has_dropdown %}
        </div>
      {% endif %}      
     
    </li>
      
    {% elsif link.title == block.settings.menu_item and block.type == 'megamenu03' %} 
          {% assign flag_yanzheng = false %}
     <li class="site-nav__item site-nav__itemsty03 site-nav__expanded-item{% if has_dropdown %} site-nav--has-dropdown{% endif %}{% if is_megamenu %} site-nav--is-megamenu{% endif %}{% unless template == 'index' %}{% if link.active %} site-nav--active{% endif %}{% endunless %}">
      
      {% if is_megamenu or has_dropdown %}
        <div
          id="site-nav-item--{{ forloop.index }}"
          class="site-nav__details"
        >
          <summary
            aria-expanded="false"
            aria-controls="site-nav-item--{{ forloop.index }}"
            class="site-nav__link site-nav__link--underline{% if has_dropdown %} site-nav__link--has-dropdown{% endif %}"
          >
            <a href="{{ link.url }}">{{ link.title }}</a>
        {%- if link.title == 'Special Offer' -%}
            <!-- <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon--wide icon-chevron-down" viewBox="0 0 28 16"><path d="M1.57 1.59l12.76 12.77L27.1 1.59" stroke-width="2" stroke="#000" fill="none" fill-rule="evenodd"/></svg> -->
          <span class="has_colorpointer"></span>
          {%- endif -%}
          </summary>
      {% else %}
        <a
          href="{{ link.url }}"
          class="site-nav__link{% if has_dropdown %} site-nav__link--has-dropdown{% endif %}"
        >
          {{ link.title }}
        </a>
      {% endif %}


        <div class="site-nav__dropdown megamenu text-left site-nav__dropdown_sty03">
          <div class="page-width">
            <div class="megamenu__wrapper">
              {%- if promo_image_1 -%}
                <div class="megamenu__promo appear-delay-1 animate-cssele">

                    <div style="margin: 0 auto; max-width: {{ promo_image_1.width }}px">
                      <div class="image-wrap aos-animate megamenu__promo-image" style="height: 0; padding-bottom: {{ 100 | divided_by: promo_image_1.aspect_ratio }}%;">
                        {%- render 'image-element',
                          img: promo_image_1,
                          widths: '540, 750, 900',
                          sizeVariable: '250px',
                        -%}
                      </div>
                    </div>
                    {%- if promo_heading_1 -%}
                      <div class="navsty03_title"><strong>{{ promo_heading_1 }}</strong></div>
                    {%- endif -%}
                    {%- if promo_text_1 -%}
                      <div class="navsty03_text">{{ promo_text_1 }}</div>
                    {%- endif -%}
                     {%- if promo_url_1 -%}
                    <a href="{{ promo_url_1 }}" class="navsty03_url"> Learn More&nbsp;<svg width="6" height="10" viewBox="0 0 6 10" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M1 1L5 5L1 9" stroke="currentColor"/>
</svg>
</a>{%- endif -%}

                </div>
              {%- endif -%}
              {%- if promo_image_2 -%}
                <div class="megamenu__promo appear-delay-2 animate-cssele">

                    <div style="margin: 0 auto; max-width: {{ promo_image_2.width }}px">
                      <div class="image-wrap aos-animate megamenu__promo-image" style="height: 0; padding-bottom: {{ 100 | divided_by: promo_image_2.aspect_ratio }}%;">
                        {%- render 'image-element',
                          img: promo_image_2,
                          widths: '540, 750, 900',
                          sizeVariable: '250px',
                        -%}
                      </div>
                    </div>
                    {%- if promo_heading_2 -%}
                      <div class="navsty03_title"><strong>{{ promo_heading_2 }}</strong></div>
                    {%- endif -%}
                    {%- if promo_text_2 -%}
                      <div class="navsty03_text">{{ promo_text_2 }}</div>
                    {%- endif -%}
                {%- if promo_url_2 -%} <a href="{{ promo_url_2 }}" class="navsty03_url"> Learn More&nbsp;<svg width="6" height="10" viewBox="0 0 6 10" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M1 1L5 5L1 9" stroke="currentColor"/>
</svg>
</a>{%- endif -%}

                </div>
              {%- endif -%}
              {%- if promo_image_3 -%}
                <div class="megamenu__promo appear-delay-3 animate-cssele">

                  <div style="margin: 0 auto; max-width: {{ promo_image_3.width }}px">
                    <div class="image-wrap aos-animate megamenu__promo-image" style="height: 0; padding-bottom: {{ 100 | divided_by: promo_image_2.aspect_ratio }}%;">
                      {%- render 'image-element',
                        img: promo_image_3,
                        widths: '540, 750, 900',
                        sizeVariable: '250px',
                      -%}
                    </div>
                  </div>
                  {%- if promo_heading_3 -%}
                    <div class="navsty03_title"><strong>{{ promo_heading_3 }}</strong></div>
                  {%- endif -%}
                  {%- if promo_text_3 -%}
                    <div class="navsty03_text">{{ promo_text_3 }}</div>
                  {%- endif -%}
                {%- if promo_url_3 -%} <a href="{{ promo_url_3 }}" class="navsty03_url"> Learn More&nbsp;<svg width="6" height="10" viewBox="0 0 6 10" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M1 1L5 5L1 9" stroke="currentColor"/>
</svg>
</a>{%- endif -%}

                </div>
            {%- endif -%}
            </div>
          </div>
        </div>


      {% if is_megamenu or has_dropdown %}
        </div>
      {% endif %}      
     
    </li>
    {% elsif link.title == block.settings.menu_item and block.type == 'megamenu04' %}    
          {% assign flag_yanzheng = false %}
     <li class="site-nav__item site-nav__item-{{ block.id }} site-nav__itemsty04 site-nav__expanded-item{% if has_dropdown %} site-nav--has-dropdown{% endif %}{% if is_megamenu %} site-nav--is-megamenu{% endif %}{% unless template == 'index' %}{% if link.active %} site-nav--active{% endif %}{% endunless %}">
       <style>
       .site-nav__item-{{ block.id }} .site-nav__dropdown{
          left:{{ block.settings.leftposi }};
       }
      </style>
      {% if is_megamenu or has_dropdown %}
        <div
          id="site-nav-item--{{ forloop.index }}"
          class="site-nav__details"
        >
          <summary
            aria-expanded="false"
            aria-controls="site-nav-item--{{ forloop.index }}"
            class="site-nav__link site-nav__link--underline{% if has_dropdown %} site-nav__link--has-dropdown{% endif %}"
          >
            <a href="{{ link.url }}">{{ link.title }}</a>
        {%- if link.title == 'Special Offer' -%}
            <!-- <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon--wide icon-chevron-down" viewBox="0 0 28 16"><path d="M1.57 1.59l12.76 12.77L27.1 1.59" stroke-width="2" stroke="#000" fill="none" fill-rule="evenodd"/></svg> -->
          <span class="has_colorpointer"></span>
          {%- endif -%}
          </summary>
      {% else %}
        <a
          href="{{ link.url }}"
          class="site-nav__link{% if has_dropdown %} site-nav__link--has-dropdown{% endif %}"
        >
          {{ link.title }}
        </a>
      {% endif %}


        <div class="site-nav__dropdown megamenu text-left site-nav__dropdown_sty04">
          <div class="page-width">
            <div class="megamenu__wrapper">
             <div class="megamenu__cols">
                <div class="megamenu__col appear-delay-1 animate-cssele">
                  {%- for childlink in link.links -%}
                    {%- liquid
                      assign create_new_column = false

                      if childlink.levels > 0 and forloop.index != 1
                        assign create_new_column = true
                      endif

                      if childlink.levels == 0 and previous_column_type == 'full'
                        assign create_new_column = true
                      endif
                    -%}

                    {%- if create_new_column -%}
                      {%- assign columns = columns | plus: 1 -%}
                      </div><div class="megamenu__col appear-delay-{{ forloop.index }} animate-cssele">
                    {%- endif -%}

                    <div class="megamenu__col-title">
                      <a href="{{ childlink.url }}" class="site-nav__dropdown-link site-nav__dropdown-link--top-level site-nav__dropdown-link--mega">
                        <span class="megamenu__link-label">
                          {{ childlink.title }}
                        </span>
                      </a>
                    </div>

                    {%- liquid
                      if childlink.levels > 0
                        assign previous_column_type = 'full'
                      else
                        assign previous_column_type = 'single'
                      endif
                    -%}

                    {%- for grandchildlink in childlink.links -%}
                      <a href="{{ grandchildlink.url }}" class="site-nav__dropdown-link">
                        {{ grandchildlink.title }}
                      </a>
                    {%- endfor -%}
                  {%- endfor -%}
                </div>
              </div>
      
              <div class="sty04_supportbox animate-cssele appear-delay-3">
              {% if block.settings.title != blank %}
              <div class="megamenu__col-title"><a href="javascript:void(0)" class="sty04_supporttitle site-nav__dropdown-link"><span class="megamenu__link-label">{{ block.settings.title }}</span></a> </div>
              {% endif %}
               <div class="sty04_supporimgbox">
                {% if block.settings.logo_1 %} <div class="sty04_supporimgitem"><img alt="" src="{{  block.settings.logo_1 | img_url:'master' }}"/></div>{% endif %}
      {% if block.settings.logo_2 %} <div class="sty04_supporimgitem"><img alt="" src="{{  block.settings.logo_2 | img_url:'master' }}"/></div>{% endif %}
      {% if block.settings.logo_3 %} <div class="sty04_supporimgitem"><img alt="" src="{{  block.settings.logo_3 | img_url:'master' }}"/></div>{% endif %}
      {% if block.settings.logo_4 %} <div class="sty04_supporimgitem"><img alt="" src="{{  block.settings.logo_4 | img_url:'master' }}"/></div>{% endif %}
      {% if block.settings.logo_5 %} <div class="sty04_supporimgitem"><img alt="" src="{{  block.settings.logo_5 | img_url:'master' }}"/></div>{% endif %}
      {% if block.settings.logo_6 %} <div class="sty04_supporimgitem"><img alt="" src="{{  block.settings.logo_6 | img_url:'master' }}"/></div>{% endif %}
               </div>
               {% if block.settings.url %}
              <a class="sty04_supportbtn" href="{{ block.settings.url }}">{{ block.settings.urltext }}<svg width="6" height="10" viewBox="0 0 6 10" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M1 1L5 5L1 9" stroke="currentColor"/>
</svg></a>
              {% endif %}
              </div>
            
            </div>
          </div>
        </div>


      {% if is_megamenu or has_dropdown %}
        </div>
      {% endif %}      
     
    </li>

     {% endif %}
  {% endfor %}
 <!-- end blocktype -->
    
      {% if flag_yanzheng %}
        <li class="site-nav__item site-nav__expanded-item{% if has_dropdown %} site-nav--has-dropdown{% endif %}{% if is_megamenu %} site-nav--is-megamenu{% endif %}{% unless template == 'index' %}{% if link.active %} site-nav--active{% endif %}{% endunless %}">
      
      {% if is_megamenu or has_dropdown %}
        <div
          id="site-nav-item--{{ forloop.index }}"
          class="site-nav__details"
        >
          <summary
            aria-expanded="false"
            aria-controls="site-nav-item--{{ forloop.index }}"
            class="site-nav__link site-nav__link--underline{% if has_dropdown %} site-nav__link--has-dropdown{% endif %}"
          >
           <a href="{{ link.url }}">{{ link.title }}</a>
        {%- if link.title == 'Special Offer' -%}
            <!-- <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon--wide icon-chevron-down" viewBox="0 0 28 16"><path d="M1.57 1.59l12.76 12.77L27.1 1.59" stroke-width="2" stroke="#000" fill="none" fill-rule="evenodd"/></svg> -->
          <span class="has_colorpointer"></span>
          {%- endif -%}
          </summary>
      {% else %}
        <a
          href="{{ link.url }}"
          class="site-nav__link{% if has_dropdown %} site-nav__link--has-dropdown{% endif %}"
        >
          {{ link.title }}
        </a>
      {% endif %}

       
       {%- if is_megamenu -%}
        {%- assign columns = 1 -%}
        <div class="site-nav__dropdown megamenu text-left">
          <div class="page-width">
            <div class="megamenu__wrapper"> 
              <div class="megamenu__cols">
                <div class="megamenu__col appear-delay-1 animate-cssele">
                  {%- for childlink in link.links -%}
                    {%- liquid
                      assign create_new_column = false
 
                      if childlink.levels > 0 and forloop.index != 1
                        assign create_new_column = true
                      endif 

                      if childlink.levels == 0 and previous_column_type == 'full'
                        assign create_new_column = true
                      endif
                    -%}

                    {%- if create_new_column -%}
                      {%- assign columns = columns | plus: 1 -%}
                      </div><div class="megamenu__col appear-delay-{{ forloop.index }}">
                    {%- endif -%}

                    <div class="megamenu__col-title">
                      <a href="{{ childlink.url }}" class="site-nav__dropdown-link site-nav__dropdown-link--top-level site-nav__dropdown-link--mega">
                        <span class="megamenu__link-label">
                          {{ childlink.title }}
                        </span>
                      </a>
                    </div>

                    {%- liquid
                      if childlink.levels > 0
                        assign previous_column_type = 'full'
                      else
                        assign previous_column_type = 'single'
                      endif
                    -%}

                    {%- for grandchildlink in childlink.links -%}
                      <a href="{{ grandchildlink.url }}" class="site-nav__dropdown-link">
                        {{ grandchildlink.title }}
                      </a>
                    {%- endfor -%}
                  {%- endfor -%}
                </div>
              </div>
              {%- if promo_image_1 -%}
                {%- assign columns = columns | plus: 1 -%}
                <div class="megamenu__promo appear-delay-{{ columns }} animate-cssele">
                  {%- if promo_url_1 -%}
                    <a href="{{ promo_url_1 }}" class="megamenu__promo-link">
                  {%- endif -%}
                    <div style="margin: 0 auto; max-width: {{ promo_image_1.width }}px">
                      <div class="image-wrap aos-animate megamenu__promo-image" style="height: 0; padding-bottom: {{ 100 | divided_by: promo_image_1.aspect_ratio }}%;">
                        {%- render 'image-element',
                          img: promo_image_1,
                          widths: '540, 750, 900',
                          sizeVariable: '250px',
                        -%}
                      </div>
                    </div>
                    {%- if promo_heading_1 -%}
                      <div><strong>{{ promo_heading_1 }}</strong></div>
                    {%- endif -%}
                    {%- if promo_text_1 -%}
                      <div>{{ promo_text_1 }}</div>
                    {%- endif -%}
                  {%- if promo_url_1 -%}
                    </a>
                  {%- endif -%}
                </div>
              {%- endif -%}
              {%- if promo_image_2 -%}
                {%- assign columns = columns | plus: 1 -%}
                <div class="megamenu__promo appear-delay-{{ columns }} animate-cssele">
                  {%- if promo_url_2 -%}
                    <a href="{{ promo_url_2 }}" class="megamenu__promo-link">
                  {%- endif -%}
                    <div style="margin: 0 auto; max-width: {{ promo_image_2.width }}px">
                      <div class="image-wrap aos-animate megamenu__promo-image" style="height: 0; padding-bottom: {{ 100 | divided_by: promo_image_2.aspect_ratio }}%;">
                        {%- render 'image-element',
                          img: promo_image_2,
                          widths: '540, 750, 900',
                          sizeVariable: '250px',
                        -%}
                      </div>
                    </div>
                    {%- if promo_heading_2 -%}
                      <div><strong>{{ promo_heading_2 }}</strong></div>
                    {%- endif -%}
                    {%- if promo_text_2 -%}
                      <div>{{ promo_text_2 }}</div>
                    {%- endif -%}
                  {%- if promo_url_2 -%}
                    </a>
                  {%- endif -%}
                </div>
              {%- endif -%}
              {%- if promo_image_3 -%}
                {%- assign columns = columns | plus: 1 -%}
                <div class="megamenu__promo appear-delay-{{ columns }} animate-cssele">
                {%- if promo_url_3 -%}
                  <a href="{{ promo_url_3 }}" class="megamenu__promo-link">
                {%- endif -%}
                  <div style="margin: 0 auto; max-width: {{ promo_image_3.width }}px">
                    <div class="image-wrap aos-animate megamenu__promo-image" style="height: 0; padding-bottom: {{ 100 | divided_by: promo_image_2.aspect_ratio }}%;">
                      {%- render 'image-element',
                        img: promo_image_3,
                        widths: '540, 750, 900',
                        sizeVariable: '250px',
                      -%}
                    </div>
                  </div>
                  {%- if promo_heading_3 -%}
                    <div><strong>{{ promo_heading_3 }}</strong></div>
                  {%- endif -%}
                  {%- if promo_text_3 -%}
                    <div>{{ promo_text_3 }}</div>
                  {%- endif -%}
                {%- if promo_url_3 -%}
                  </a>
                {%- endif -%}
                </div>
            {%- endif -%}
            {% comment %} {%- if promo_image_4 -%}
                {%- assign columns = columns | plus: 1 -%}
                <div class="megamenu__promo appear-animation appear-delay-{{ columns }} animate-cssele">
                {%- if promo_url_4 -%}
                  <a href="{{ promo_url_4 }}" class="megamenu__promo-link">
                {%- endif -%}
                  <div style="margin: 0 auto; max-width: {{ promo_image_4.width }}px">
                    <div class="image-wrap aos-animate megamenu__promo-image" style="height: 0; padding-bottom: {{ 100 | divided_by: promo_image_2.aspect_ratio }}%;">
                      {%- render 'image-element',
                        img: promo_image_4,
                        widths: '540, 750, 900',
                        sizeVariable: '250px',
                      -%}
                    </div>
                  </div>
                  {%- if promo_heading_4 -%}
                    <div><strong>{{ promo_heading_4 }}</strong></div>
                  {%- endif -%}
                  {%- if promo_text_4 -%}
                    <div>{{ promo_text_4 }}</div>
                  {%- endif -%}
                {%- if promo_url_4 -%}
                  </a>
                {%- endif -%}
                </div>
            {%- endif -%}
            {%- if promo_image_5 -%}
                {%- assign columns = columns | plus: 1 -%}
                <div class="megamenu__promo appear-animation appear-delay-{{ columns }} animate-cssele">
                {%- if promo_url_5 -%}
                  <a href="{{ promo_url_5 }}" class="megamenu__promo-link">
                {%- endif -%}
                  <div style="margin: 0 auto; max-width: {{ promo_image_5.width }}px">
                    <div class="image-wrap aos-animate megamenu__promo-image" style="height: 0; padding-bottom: {{ 100 | divided_by: promo_image_5.aspect_ratio }}%;">
                      {%- render 'image-element',
                        img: promo_image_5,
                        widths: '540, 750, 900',
                        sizeVariable: '250px',
                      -%}
                    </div>
                  </div>
                  {%- if promo_heading_5 -%}
                    <div><strong>{{ promo_heading_5 }}</strong></div>
                  {%- endif -%}
                  {%- if promo_text_5 -%}
                    <div>{{ promo_text_5 }}</div>
                  {%- endif -%}
                {%- if promo_url_5 -%}
                  </a>
                {%- endif -%}
                </div>
            {%- endif -%} {% endcomment %}
            </div>
          </div>
        </div>
      {%- elsif has_dropdown -%}
        <ul class="site-nav__dropdown text-left">
          {%- for childlink in link.links -%}
            {%- liquid
              assign has_sub_dropdown = false
              if childlink.links != blank
                assign has_sub_dropdown = true
              endif
            -%}

            <li class="{% if childlink.active %}site-nav--active{% endif %}{% if has_sub_dropdown %} site-nav__deep-dropdown-trigger{% endif %}">
              {% if has_sub_dropdown %}
                <div
                  id="site-nav-deep-item--{{ forloop.index }}"
                  class="site-nav__details"
                >
                  <summary
                    aria-expanded="false"
                    aria-controls="site-nav-deep-item--{{ forloop.index }}"
                    class="site-nav__dropdown-link site-nav__dropdown-link--second-level{% if has_sub_dropdown %} site-nav__dropdown-link--has-children{% endif %}"
                  >
                    {{ childlink.title | escape }}
                    {%- if has_sub_dropdown -%}
                      <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon--wide icon-chevron-down" viewBox="0 0 28 16"><path d="M1.57 1.59l12.76 12.77L27.1 1.59" stroke-width="2" stroke="#000" fill="none" fill-rule="evenodd"/></svg>
                    {%- endif -%}
                  </summary>
              {% else %}
                <a href="{{ childlink.url }}" class="site-nav__dropdown-link site-nav__dropdown-link--second-level">
                  {{ childlink.title | escape }}
                </a>
              {% endif %}

              {%- if has_sub_dropdown -%}
                <ul class="site-nav__deep-dropdown">
                  {%- for grandchildlink in childlink.links -%}
                    <li>
                      <a href="{{ grandchildlink.url }}" class="site-nav__dropdown-link">{{ grandchildlink.title | escape }}</a>
                    </li>
                  {%- endfor -%}
                </ul>
              {%- endif -%}

              {% if has_sub_dropdown %}
                </div>
              {% endif %}
            </li>
          {%- endfor -%}
        </ul>
      {%- endif -%}

      {% if is_megamenu or has_dropdown %}
        </div>
      {% endif %}      
     
    </li>
   {% endif %}

  
  {%- endfor -%}
</ul>
