{% liquid
  assign secid = section.id | split:"__" 
  assign secidlast = secid[1] | replace: "-","_"
%}
<div class="index-reviewsoutbox">
  {%- if section.settings.title != blank -%}
    <div class="index-reviews-title animate-ele">{{ section.settings.title }}</div>
  {%- endif -%}
<div class="index-reviews-container animate-ele" id="index-reviews-con-{{ secidlast }}">
        <div class="swiper-button-prev reviewsbtn reviewprev-{{ secidlast }}"><svg width="50" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
<circle cx="25" cy="25" r="24" stroke="currentColor" stroke-width="2"/>
<path d="M26.2939 19.2939L20.2939 25.2939L26.2939 31.2939" stroke="currentColor" stroke-width="2"/>
</svg>
</div>
        <div class="swiper-button-next reviewsbtn reviewnext-{{ secidlast }}"><svg width="50" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
<circle cx="25" cy="25" r="24" transform="matrix(-1 0 0 1 50 0)" stroke="currentColor" stroke-width="2"/>
<path d="M23.7061 19.2939L29.7061 25.2939L23.7061 31.2939" stroke="currentColor" stroke-width="2"/>
</svg>
</div>
    <div class="contain-index">

  {%- if section.blocks.size > 0 -%}
    <div id="indexreview-wrapper">     
      <div class="swiper" id="inreview-{{ secidlast }}">
        <div class="swiper-pagination swiper-pagination-{{ secidlast }}"></div>
         <div class="swiper-wrapper">
        {%- for block in section.blocks -%}
          <div class="swiper-slide">
            <div class="indexreview-item">
 
              <div class="indexreview-item-star">
               {%- if block.settings.icon == '5-stars' -%}
                <span class="stars-wrapper">
                  <img alt="review star" src="https://cdn.shopify.com/s/files/1/0558/0708/2629/files/Star_3.png?v=1708926647"/>
                  <img alt="review star" src="https://cdn.shopify.com/s/files/1/0558/0708/2629/files/Star_3.png?v=1708926647"/>
                  <img alt="review star" src="https://cdn.shopify.com/s/files/1/0558/0708/2629/files/Star_3.png?v=1708926647"/>
                  <img alt="review star" src="https://cdn.shopify.com/s/files/1/0558/0708/2629/files/Star_3.png?v=1708926647"/>
                  <img alt="review star" src="https://cdn.shopify.com/s/files/1/0558/0708/2629/files/Star_3.png?v=1708926647"/>
                </span>
                {%- elsif block.settings.icon == '4-stars' -%}
                <span class="stars-wrapper">
                  <img alt="review star" src="https://cdn.shopify.com/s/files/1/0558/0708/2629/files/Star_3.png?v=1708926647"/>
                  <img alt="review star" src="https://cdn.shopify.com/s/files/1/0558/0708/2629/files/Star_3.png?v=1708926647"/>
                  <img alt="review star" src="https://cdn.shopify.com/s/files/1/0558/0708/2629/files/Star_3.png?v=1708926647"/>
                  <img alt="review star" src="https://cdn.shopify.com/s/files/1/0558/0708/2629/files/Star_3.png?v=1708926647"/>
                </span>
                {%- elsif block.settings.icon == '3-stars' -%}
                <span class="stars-wrapper">
                  <img alt="review star" src="https://cdn.shopify.com/s/files/1/0558/0708/2629/files/Star_3.png?v=1708926647"/>
                  <img alt="review star" src="https://cdn.shopify.com/s/files/1/0558/0708/2629/files/Star_3.png?v=1708926647"/>
                  <img alt="review star" src="https://cdn.shopify.com/s/files/1/0558/0708/2629/files/Star_3.png?v=1708926647"/>
                </span>
                {%- elsif block.settings.icon == '2-stars' -%}
                <span class="stars-wrapper">
                 <img alt="review star" src="https://cdn.shopify.com/s/files/1/0558/0708/2629/files/Star_3.png?v=1708926647"/>
                  <img alt="review star" src="https://cdn.shopify.com/s/files/1/0558/0708/2629/files/Star_3.png?v=1708926647"/>
                </span>
                {%- elsif block.settings.icon == '1-stars' -%}
                <span class="stars-wrapper">
                 <img alt="review star" src="https://cdn.shopify.com/s/files/1/0558/0708/2629/files/Star_3.png?v=1708926647"/>
                </span>
                {%- endif -%}

              </div>
              {% if block.settings.title != blank %}
                <div class="indexreview-item-title">{{ block.settings.title }}</div>
              {% endif %}        
              {% if block.settings.content != blank %}
                <div class="indexreview-item-content">{{ block.settings.content }}</div>
              {% endif %}

              {% if block.settings.author != blank or block.settings.image %}
              <div class="indexreview-item-authorbox">
              {% if block.settings.image %}<span><img src="{{ block.settings.image | img_url:'master' }}"></span>{% endif %}
              {% if block.settings.author != blank %}<div class="indexreview-author">{{ block.settings.author }}</div>{% endif %} 
              </div>
              {% endif %}
              
            </div>
          </div>
        {%- endfor -%}
        </div>
        



      </div>
      
    </div>
  {%- endif -%}

    </div>
</div>
</div>

<script> 
  var inreview_{{ secidlast }} = new Swiper('#inreview-{{ secidlast }}',{
    slidesPerView : 3,
    spaceBetween: '2.2%',
    autoplay: {% if section.settings.autoplay %}true{% else %}false{% endif %},
    navigation: {
		nextEl: '.reviewnext-{{ secidlast }}',
		prevEl: '.reviewprev-{{ secidlast }}',
	},
    breakpoints: { 
      10: {
        slidesPerView: 1.4,
        centeredSlides: true,   spaceBetween: '2.8%',autoHeight: true,pagination: {
        el: ".swiper-pagination-{{ secidlast }}",
        type: "fraction",
      }
     
      },
      550: {  
        slidesPerView: 2,
        centeredSlides: false,
      },
      768: {  //当屏幕宽度大于等于768 
        slidesPerView: 2,
      },
      994: { 
        slidesPerView: 3,
      }
    },on: {
    init: function(){
     
    }, 
  }
  })
  inreview_{{ secidlast }}.slideTo(1, 500, false); 
</script>
<script>
    $(document).ready(function() {
        // 获取所有元素
        var elements = $('.indexreview-item-content');

        // 初始化最大高度为0
        var maxHeight = 0;

        // 遍历元素，找到最大高度
        elements.each(function() {
            var currentHeight = $(this).height();
            if (currentHeight > maxHeight) {
                maxHeight = currentHeight;
            }
        });

        // 将所有元素的高度设置为最大值
        elements.height(maxHeight);
    });
</script>
{% schema %}
  {
    "name": "Index Reviews",
    "class": "index-section",
    "settings": [
      {
        "type": "text",
        "id": "title",
        "label": "title"
      },{
        "type": "checkbox",
        "id": "autoplay",
        "label": "autoplay?"
      }
    ],
    "blocks": [
      {
        "type": "reviews",
        "name": "Reviews",
        "settings": [
          {
            "type": "text",
            "id": "title",
            "label": "title"
          },{
            "type": "richtext",
            "id": "content",
            "label": "content"
          },{
            "type": "image_picker",
            "id": "image",
            "label": "Author's image"
          },
          {
            "type": "text",
            "id": "author",
            "label": "Author",
            "default": "Author's name"
          },
          {
            "type": "select",
            "id": "icon",
            "label": "Icon",
            "default": "5-stars",
            "options": [
              {
                "value": "5-stars",
                "label": "5 stars"
              },
              {
                "value": "4-stars",
                "label": "4 stars"
              },
              {
                "value": "3-stars",
                "label": "3 stars"
              },
              {
                "value": "2-stars",
                "label": "2 stars"
              },
              {
                "value": "1-stars",
                "label": "1 stars"
              }
            ]
          }
        ]
      }
    ],
	"presets": [
      {
        "name": "Index Reviews","category": "Ho-Advance"
      }
    ]
  }
{% endschema %}
