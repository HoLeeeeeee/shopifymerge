{{ 'section-coverage-custom-image.css' | asset_url | stylesheet_tag }}
{% liquid
  assign secid = section.id | split: '__'
  assign secidlast = secid[1] | replace: '-', '_'
%}

<div class="coverage-image-box swpbtnbox">
  <div class="contain-index">
    {% if section.settings.title != blank %}
      <div class="coverage-image-toptitle common-title animate-ele">{{ section.settings.title }}</div>
    {% endif %}
    <div class="coverage-image-content animate-ele">
      <div class="coverage-image-conitem">
        <div class="swiper-button-prev swpallbtn coverage-imageprev-{{ secidlast }}">
          <svg width="50" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="25" cy="25" r="24" stroke="currentColor" stroke-width="2"/>
            <path d="M26.2939 19.2939L20.2939 25.2939L26.2939 31.2939" stroke="currentColor" stroke-width="2"/>
          </svg>
        </div>
        <div class="swiper-button-next swpallbtn coverage-imagenext-{{ secidlast }}">
          <svg width="50" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="25" cy="25" r="24" transform="matrix(-1 0 0 1 50 0)" stroke="currentColor" stroke-width="2"/>
            <path d="M23.7061 19.2939L29.7061 25.2939L23.7061 31.2939" stroke="currentColor" stroke-width="2"/>
          </svg>
        </div>
        <div class="coverage-image-{{ secidlast }} swiper">
          <div class="swiper-scrollbar hide-pc swiper-scrollbar-{{ secidlast }}"></div>
          <div class="swiper-wrapper">
            {% for block in section.blocks %}
              <div class="swiper-slide">
                <div class="coverage-image-proitem coverage-image-proitem-{{ block.settings.text_position }}">
                  {% if block.settings.image %}
                    <div class="coverage-image-img">
                      <img
                        class="{% if block.settings.imagemb  %}hide-mb{% endif %}"
                        src="{{ block.settings.image | img_url:'master' }}"
                        alt=" "
                      >
                    </div>
                  {% endif %}
                  {% if block.settings.imagemb %}
                    <div class="coverage-image-img">
                      <img class="hide-pc" src="{{ block.settings.imagemb | img_url:'master' }}" alt=" ">
                    </div>
                  {% endif %}
                  {% if block.settings.title != blank %}
                    <div class="coverage-image-title" style="color:{{ block.settings.color }}">
                      {{ block.settings.title }}
                    </div>
                  {% endif %}
                </div>
              </div>
            {% endfor %}
          </div>
        </div>
      </div>
      <script>
         $(function(){
             var coverage_image_{{secidlast}} = new Swiper ('.coverage-image-{{ secidlast }}', {
           slidesPerView : 3,
           spaceBetween: '3%',
           observer: true,  //开启动态检查器，监测swiper和slide
           observeParents: true,
           navigation: {
        	nextEl: '.coverage-imagenext-{{ secidlast }}',
        	prevEl: '.coverage-imageprev-{{ secidlast }}',
        },
            scrollbar: {
             el: '.swiper-scrollbar-{{ secidlast }}',dragSize:89
           }
           ,
           breakpoints: {
             10: {
              slidesPerView : 1.5,
                spaceBetween: '2.5%',
             },
             550: {
              slidesPerView : 1.6,
             },
             769: {  //当屏幕宽度大于等于769
               slidesPerView: 3,
             },
             994: {
               slidesPerView : 3,
             }
           }

         });
         })
      </script>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Coverage Custom Image",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "title"
    }
  ],
  "blocks": [
    {
      "type": "block",
      "name": "block",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "image_picker",
          "id": "imagemb",
          "label": "Image(mobile)"
        },
        {
          "type": "text",
          "id": "title",
          "label": "title"
        },
        {
          "type": "color",
          "id": "color",
          "label": "color",
          "default": "#282828"
        },
        {
          "type": "select",
          "id": "text_position",
          "label": "text position",
          "options": [
            {
              "value": "top",
              "label": "top"
            },
            {
              "value": "center",
              "label": "center"
            },
            {
              "value": "bottom",
              "label": "bottom"
            }
          ]
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Coverage Custom Image",
      "category": "HO-layout"
    }
  ]
}
{% endschema %}
