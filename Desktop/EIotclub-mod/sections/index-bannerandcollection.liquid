{% liquid
  assign secid = section.id | split:"__" 
  assign secidlast = secid[1] | replace: "-","_"
%}
    <style>
  #indexbanncolpad-{{ secidlast }}{
    margin-bottom:{{  section.settings.bottom_dis | divided_by: 19.2 }}vw;
  }
</style>
<div class="indexbanncol-outbox">
   
    <div class="indexbanncol-container" id="indexbanncolpad-{{ secidlast }}">
  {% if section.settings.image  %}
      <div class="indexbanncol-img"><img class="{% if section.settings.imagemb  %}hide-mb{% endif %}"  src="{{ section.settings.image | img_url:'master' }}" alt="" /></div>
     {% endif %} 
    {% if section.settings.imagemb  %}
      <div class="indexbanncol-img"><img class="hide-pc"  src="{{ section.settings.imagemb | img_url:'master' }}"  alt="" /></div>
   {% endif %}
    <div class="indexbanncol-text " style="color:{{ section.settings.textcolor }}">
    {% if section.settings.title != blank %}
    <div class="indexbanncol-title animate-ele">{{ section.settings.title }}</div>
    {% endif %}
    {% if section.settings.content != blank %}
    <div class="indexbanncol-content animate-ele">{{ section.settings.content }}</div>
    {% endif %}
    {% if section.settings.btn != blank %}
    <a class="indexbanncol-btn bthho animate-ele" href="{{ section.settings.url }}"><span>{{ section.settings.btn }}</span></a>
    {% endif %} 
    </div>
       
    <div class="indexbanncol-coll contain-index animate-ele">
       <div class="swiper-scrollbar hide-pc swiper-scrollbar-{{ secidlast }}"></div>
     <div id="indexbanswcoll-{{ secidlast }}" class="indexbanswcoll-sw swiper">

    <div class="swiper-wrapper">  
      {% for block in section.blocks%} 
       {% assign product = all_products[block.settings.product] %}
      <div class="swiper-slide">
       <div class="mulca-conitsp-proitem">
          <div class="mulcon-proitem-img">
            <a href="{{  product.url  }}"> <img src="{% if product.metafields.custom.grid_image != blank %}{{ product.metafields.custom.grid_image | image_url }}{% else %}{{ product.featured_image | img_url:'master' }}{% endif %}" alt="{{ product.featured_image.alt }}" /></a>
            {% if product.tags contains "new" or product.tags contains "New" %}
              <span class="mulconpro-tag mulconpro-tag-new">New</span>
            {% elsif product.tags contains "deal" or product.tags contains "Deal" %}
               <span class="mulconpro-tag mulconpro-tag-deal">Deal</span>
            {% endif %}
          </div>
          {% if block.settings.title != blank %}
            <div class="mulcon-proitem-toptitle">{{ block.settings.title }}</div>
        {% endif %}
         <div class="mulcon-proitem-title"><a href="{{  product.url  }}">{% if product.metafields.custom.short_title != blank %}{{ product.metafields.custom.short_title }}{% else %}{{ product.title }}{% endif %}</a></div>
          {% if block.settings.content != blank %}<div class="mulcon-proitem-subtitle">{{ block.settings.content }}</div>{% endif %}
         <div class="mulcon-proitem-price">
          
          {%- capture form_id -%}AddToCartForm-{{ product.id }}{%- endcapture -%}
  {%- capture class_value -%}product-single__form{%- endcapture -%}
  {% assign current_variant = product.selected_or_first_available_variant  %}
  {% form 'product', product, id: form_id, class: class_value %}
      <button
        {% if product.empty? %}type="button"{% else %}type="submit"{% endif %}
        name="add"
        data-add-to-cart
        class="add-to-cart-col addcartcustom js-drawer-open-cart" data-product-id="{{ current_variant.id }}"
        {% unless current_variant.available %} disabled="disabled"{% endunless %}>
        <span data-add-to-cart-text data-default-text="Add to cart">
          <b><img alt="cart" src="https://cdn.shopify.com/s/files/1/0558/0708/2629/files/mulist_4.png?v=1709101569"/></b>
        </span>
      </button>

  
    <select name="id" data-product-select class="product-single__variants no-js">
      {%- for variant in product.variants -%}
        {% if variant.available %}
          <option {% if variant == product.selected_or_first_available_variant %}
            selected="selected" {% endif %}
            value="{{ variant.id }}">
            {{ variant.title }} - {{ variant.price | money_with_currency }}
          </option>
        {% else %}
          <option disabled="disabled">
            {{ variant.title }} - {{ 'products.product.sold_out' | t }}
          </option>
        {% endif %}
      {%- endfor -%}
    </select>
  {% endform %}

          <span class="mulcon-price-original">{{ product.price | money }}</span>{% if product.price_varies %}<span class="mulcon-price-old">{{ product.compare_at_price | money }}</span>{% endif %}</div>              


         </div>
      </div>
         {% endfor %}
      
    </div>
  </div>
  
     </div>
      
    </div>
    

</div>

        <script>   
  $(function(){
      var banswcoll_{{secidlast}} = new Swiper ('#indexbanswcoll-{{ secidlast }}', {
    slidesPerView : 4,
       autoHeight: true,
    observer: true,  //开启动态检查器，监测swiper和slide
    observeParents: true,
     scrollbar: {
      el: '.swiper-scrollbar-{{ secidlast }}',dragSize:89
    },
    breakpoints: { 
      10: {  
       slidesPerView : 1.5,
      },
      550: {  //当屏幕宽度大于等于768 
       slidesPerView : 2,
      },
      769: {  //当屏幕宽度大于等于768 
        slidesPerView: 3,
      },
      994: { 
        slidesPerView : 4,
      }
    }

  });
  })

</script>

{% schema %}
  {
   "name": "BannerAndCollection",
  "settings": [
     {
        "type": "image_picker",
        "id": "image",
        "label": "image"
         },{
        "type": "image_picker",
        "id": "imagemb",
        "label": "image(mobile)"
         },{
          "type": "color",
          "id": "textcolor",
          "label": "text color",
          "default": "#282828"
        },{
        "type": "text",
        "id": "title",
        "label": "title"
      },{
            "type": "richtext",
            "id": "content",
            "label": "content"
          },{
            "type": "text",
            "id": "btn",
            "label": "button"
          },{
            "type": "url",
            "id": "url",
            "label": "url"
          },
      {
        "id": "bottom_dis",
        "type": "range",
        "label": "Botttom Distence",
        "default": 400,
        "min": 100,
        "max": 600,
        "step": 5,
        "unit": "px"
      }
    ],
    "blocks": [
    {
      "type": "block",
      "name": "block",
      "settings": [
        {
          "type": "product",
          "id": "product",
          "label": "product"
        },{
      "type": "text",
      "id": "title",
      "label": "title"
    },{
      "type": "html",
      "id": "content",
      "label": "content"
    }
      ]
    }
  ],
    "presets": [
      {
        "name": "BannerAndCollection",
        "category": "HO-layout"
      }
    ]
  }
{% endschema %}
