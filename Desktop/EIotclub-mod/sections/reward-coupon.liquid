<div class="reward-coupon-section">
<div class="contain-index reward-coupon-product">
  <div class="text-wrapper">
    {% if section.settings.title != blank %}
      <div class="common-title">
        {{ section.settings.title }}
      </div>
    {% endif %}
    {% if section.settings.content != blank %}
      <div class="reward-program-middetails-content">
        {{ section.settings.content }}
      </div>
    {% endif %}
    {% if section.settings.subtitle != blank %}
      <div class="reward-subtitle">
        {{ section.settings.subtitle }}
      </div>
    {% endif %}
  </div>
  <div class="reward-container common-swiper-container">
    <div class="swiper-container">
      <div class="content-wrapper swiper-wrapper">
        {% for block in section.blocks %}
          <div class="reward-coupon-product-box swiper-slide">
            {% render 'reward-coupon-product-block',
              block: block,
              image: image,
              title: title,
              custom_price: custom_price,
              custom_point: custom_point
            %}
            <div class="reward-rules">
              <a class="smile-link" href="#smile-points-products">Redeem</a>
              <a data-index="{{ forloop.index }}" class="rules-link" href="javascript:void(0)">Rules</a>
            </div>
          </div>
        {% endfor %}
      </div>
      {% if section.blocks.size > 2 %}
      <div class="mb-show">
        <div class="swiper-scrollbar swiper-scrollbar-coupon"></div>
      </div>
    {% endif %}
    </div>
    {% if section.blocks.size > 4 %}
    <div class="pc-show">
      <div class="swiper-button-prev common-swiper-arrow-btn">
        {% render 'swiper-prev-icon' %}
      </div>
      <div class="swiper-button-next common-swiper-arrow-btn">
        {% render 'swiper-next-icon' %}
      </div>
    </div>
    {% endif %}
  </div>

  <div class="rules-notice-bg">
    <div class="rules-notice">
      <span class="rules-close-btn">
        <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M1.22461 13.01L12.9999 1.00005" stroke="white" stroke-width="2" stroke-linecap="round"/>
          <path d="M1 1L13 13" stroke="white" stroke-width="2" stroke-linecap="round"/>
        </svg>          
      </span>
      {% for block in section.blocks %}
        <div data-index="{{ forloop.index }}" class="rules-notice-box">
        {% render 'reward-coupon-product-block',
          block: block,
          image: image,
          title: title,
          custom_price: custom_price,
          custom_point: custom_point
        %}

        {% if block.settings.rules != blank %}
          <div class="custom_rules">
            <h3 class="font24">Rules</h3>
            <div>{{ block.settings.rules }}</div>
          </div>
        {% endif %}
      </div>
      {% endfor %}
    </div>
  </div>
</div>
</div>

<script>
  let coupon = new Swiper('.reward-coupon-section .swiper-container', {
    slidesPerView: 1.8,
    slidesPerColumn: 2,
    slidesPerColumnFill: 'row',
    spaceBetween: 10,
    observer: true,
    resizeObserver: true,
    scrollbar: {
      el: '.swiper-scrollbar-coupon',
      dragSize:89
    },
    breakpoints: {
      768: {
        slidesPerView: 2.8,
        slidesPerColumn: 1,
        spaceBetween: 20,
        scrollbar: {
          el: '.swiper-scrollbar-coupon',
          dragSize:89
        },
      },
      1000: {
        slidesPerView: 4,
        slidesPerColumn: 1,
        spaceBetween: 20,
        navigation: {
          nextEl: '.reward-coupon-section .swiper-button-next',
          prevEl: '.reward-coupon-section .swiper-button-prev',
        }
      },
    },
  });
</script>

{% schema %}
{
  "name": "Reward Coupon",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Section title"
    },
    {
      "type": "text",
      "id": "content",
      "label": "Section content"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "Sub Title"
    }
  ],
  "blocks": [
    {
      "type": "block",
      "name": "block",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image",
          "info": "Size:243px*106px"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Custom Title"
        },
        {
          "type": "text",
          "id": "custom_price",
          "label": "Custom Price",
          "info": "eg. $1,299.99 "
        },
        {
          "type": "text",
          "id": "custom_point",
          "label": "Custom Points",
          "info": "eg. 1000 "
        },
        {
          "type": "richtext",
          "id": "rules",
          "label": "Custom Rules"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Reward Coupon",
      "category": "Ho-Advance"
    }
  ]
}
{% endschema %}
