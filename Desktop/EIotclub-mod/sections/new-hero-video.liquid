{%- liquid
  assign mg_top_desktop = section.settings.mg_top_desktop
  assign mg_top_tablet = section.settings.mg_top_tablet
  assign mg_top_mobile = section.settings.mg_top_mobile

  assign mg_bottom_desktop = section.settings.margin_bottom
  assign mg_bottom_tablet = section.settings.margin_bottom_tab
  assign mg_bottom_mobile = section.settings.margin_bottom_mb

  assign color_bg = section.settings.bg_color
-%}
<style>
    @media (max-width: 767px) {
    #new-hero-video-{{ section.id }} {
            padding-top: {{ mg_top_mobile | append: 'px' }};
            padding-bottom: {{ mg_bottom_mobile | append: 'px' }};
        }

    }

    @media (min-width: 1200px) {
    #new-hero-video-{{ section.id }} {
            padding-top: {{ mg_top_desktop | append: 'px' }};
            padding-bottom: {{ mg_bottom_desktop | append: 'px' }};
        }
    }


    @media (min-width: 768px) and (max-width: 1199px) {
    #new-hero-video-{{ section.id }} {
            padding-top: {{ mg_top_tablet | append: 'px' }};
            padding-bottom: {{ mg_bottom_tablet | append: 'px' }};
        }
    }
    #new-hero-video-{{ section.id }}>h3{
        font-size: {{ section.settings.header_size | append: 'px' }} ;
        font-weight: {{ section.settings.header_font_weight }};
        line-height: {{ section.settings.header_line_height | append: 'px'  }};
        letter-spacing: {{ section.settings.header_letter_spacing | append: 'px' }};
        color: {{ section.settings.header_color }};
        text-align: center;
    }
  #new-hero-video-{{ section.id }} .hero-video-list{
    margin:32px  0 8px;
    display: flex;
    width: 100%;
    justify-content: space-between;
    align-items: center;
    overflow-x: auto;
  }
  #new-hero-video-{{ section.id }} .hero__text-wrap{
    height: auto;
  }
  #new-hero-video-{{ section.id }} .hero__text-wrap *{
    padding: 0;
  margin: 0;
  }
  #new-hero-video-{{ section.id }} .btn{
    color: #fff;
    min-width: 0px;
    padding: 11px 15px;
    border-radius: 30px;
  }
  #new-hero-video-{{ section.id }} .btn .icon-play {
    margin-right: 0px;
    }
  #new-hero-video-{{ section.id }} .hero{
    margin: 0 5px;
    min-width: 260px;
    min-height: 500px;
    transition: all 1s;
    border-radius: 20px;
    overflow: hidden;
    background: transparent;
  }
  #new-hero-video-{{ section.id }} img{
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%,-50%);
    height: 100%;
    object-fit: cover;
  }
  #new-hero-video-{{ section.id }} .hero__text-wrap{
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%,-50%);
    z-index: 5;
  }
  @media (max-width:767px){
    #new-hero-video-{{ section.id }}>h3{
        padding-right: 20px;
        font-size: {{ section.settings.header_size_mo | append: 'px' }} ;
        font-weight: {{ section.settings.header_font_weight_mo }};
        line-height: {{ section.settings.header_line_height_mo | append: 'px'  }};
        letter-spacing: {{ section.settings.header_letter_spacing_mo | append: 'px' }};
    }
    #new-hero-video-{{ section.id }} .btn{
      min-width: 0px;
      padding: 13px 15px;
      border-radius: 30px;
    }
    #new-hero-video-{{ section.id }} .hero{
      min-width: 330px;
      min-height: 260px;
      border-radius: 12px;
    }
    #new-hero-video-{{ section.id }} img{
      min-width: 400px;
    }
    .new-hero-video-{{ section.id  }}{
      padding-right:0
    }
  }
</style>
<div class="page-width new-hero-video-{{ section.id  }}">
  <div id="new-hero-video-{{ section.id  }}">
    <h3>{{ section.settings.header }}</h3>
    <div class="hero-video-list">
      {% for block in section.blocks %}
        {%- style -%}
          .hero--{{ block.id }} .hero__title {
            font-size: {{ block.settings.title_size | times: 0.5 }}px;
          }
          @media only screen and (min-width: 769px) {
            .hero--{{ block.id }} .hero__title {
              font-size: {{ block.settings.title_size }}px;
            }
          }

          {% if block.settings.overlay_opacity > 0 %}
            .hero--{{ block.id }} .hero__text-wrap:after {
              content: '';
              position: absolute;
              left: 0;
              right: 0;
              top: 0;
              bottom: 0;
              z-index: 3;
              background-color: #000;
              opacity: {{ block.settings.overlay_opacity | divided_by: 100.0 }};
            }
          {% endif %}
        {%- endstyle -%}
        <div
          data-section-id="{{ block.id }}"
          data-section-type="video-section"
          data-mobile-natural="false"
          class="video-parent-section hero hero--{{ block.id }} hero--{{ block.settings.block_height }} hero--mobile--{{ block.settings.mobile_height }}"
          data-aos="hero__animation"
        >
          <div class="hero__media hero__media--{{ block.id }}">
            {% comment %}
              {%- if block.settings.video_url contains 'youtube.com/watch' -%}
                {%- assign video_id = block.settings.video_url | split: 'v=' -%}
                {%- assign video_id = video_id[1] | split: '&' | first -%}
                <div
                  id="YouTubeVideo-{{ block.id }}"
                  class="video-div"
                  data-type="youtube"
                  data-video-id="{{ video_id }}"></div>
              {%- endif -%}

              {%- if block.settings.video_url contains 'youtu.be/' -%}
                {%- assign video_id = block.settings.video_url | split: '.be/' -%}
                {%- assign video_id = video_id[1] | split: '&' | first -%}
                <div
                  id="YouTubeVideo-{{ block.id }}"
                  class="video-div"
                  data-type="youtube"
                  data-video-id="{{ video_id }}"></div>
              {%- endif -%}

              {%- if block.settings.video_url contains 'vimeo.com' -%}
                {%- assign video_id = block.settings.video_url | split: '.com/' -%}
                {%- assign video_id = video_id[1] | split: '/' | first -%}
                <div
                  id="Vimeo-{{ block.id }}"
                  class="video-div"
                  data-type="vimeo"
                  data-video-id="{{ video_id }}"></div>
              {%- endif -%}

              {%- if block.settings.video_url contains '.mp4' or block.settings.video_url contains '.MP4' -%}
                <video
                  id="Mp4Video-{{ block.id }}"
                  class="video-div"
                  src="{{ block.settings.video_url }}"
                  data-type="mp4"
                  loop muted playsinline autoplay></video>
              {%- endif -%}
            {% endcomment %}
            <img loading="lazy" src="{{ block.settings.image | img_url: 'large' }}" alt="">
          </div>

          <div class="hero__text-wrap{% if block.settings.section_height == '16-9' %} hero__text-wrap--absolute{% endif %}">
            <div class="page-width">
              <div class="hero__text-content {{ block.settings.text_align }}">
                {%- assign link_href = block.settings.link -%}
                {%- if block.settings.link == blank -%}
                  {%- assign link_href = block.settings.video_url -%}
                {%- endif -%}

                {%- assign youtube_video_link = false -%}
                {%- if link_href contains 'youtube.com/watch' or link_href contains 'youtu.be/' -%}
                  {%- assign youtube_video_link = true -%}
                {%- endif -%}

                <div class="hero__link">
                  <div class="animation-cropper" style="opacity: 1;">
                    <div class="animation-contents" style="opacity: 1; transform: translateY(0px)">
                      <a
                        aria-label="videoPlayer"
                        href="{{ link_href }}"
                        class="btn btn--inverse{% if youtube_video_link %} btn--no-animate{% endif %}"
                        {%- if block.settings.video_url contains 'vimeo.com' -%}
                          data-video-id="{{ video_id }}"
                        {%- endif -%}
                        style="opacity: 1;"
                      >
                        {%- if youtube_video_link -%}
                          <svg
                            aria-hidden="true"
                            focusable="false"
                            role="presentation"
                            class="icon icon-play"
                            viewBox="18.24 17.35 24.52 28.3"
                          >
                            <path fill="#323232" d="M22.1 19.151v25.5l20.4-13.489-20.4-12.011z"/>
                          </svg>
                        {%- endif -%}
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</div>
<script>
  $(document).ready(function () {
    // 当页面DOM加载完毕时执行以下代码
    if ($(window).width() > 787) {
      $('#new-hero-video-{{ section.id }} .hero').first().css('width', '60%').siblings().css('width', '20%');

      $('#new-hero-video-{{ section.id }} .hero').each(function () {
        // 循环所有.box元素并绑定mouseenter事件处理程序

        $(this).mouseenter(function () {
          // 鼠标进入事件处理程序
          $(this).css('width', '60%').siblings().css('width', '20%');
        });
      });
    } else {
      $('#new-hero-video-{{ section.id }} .hero').css('width', '70%');
    }
    $(window).resize(function () {
      // 监听窗口大小改变事件

      if ($(window).width() > 787) {
        // 如果屏幕宽度大于787px，则执行以下代码
        $('#new-hero-video-{{ section.id }} .hero').first().css('width', '60%').siblings().css('width', '20%');

        $('#new-hero-video-{{ section.id }} .hero')
          .each(function () {
            // 循环所有.box元素并绑定mouseenter事件处理程序

            $(this).mouseenter(function () {
              // 鼠标进入事件处理程序
              $(this).css('width', '60%').siblings().css('width', '20%');
            });
          })
          .trigger('resize');
      } else {
        $('#new-hero-video-{{ section.id }} .hero').css('width', '70%');
      }
    });
  });
</script>
{% schema %}
{
  "name": "new-hero-video",
  "class": "index-section--hero",
  "settings": [
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "header",
      "content": "Margin Bottom:"
    },
    {
      "type": "range",
      "id": "margin_bottom_mb",
      "label": "Mobile",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 40
    },
    {
      "type": "range",
      "id": "margin_bottom_tab",
      "label": "Tablet",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 40
    },
    {
      "type": "range",
      "id": "margin_bottom",
      "label": "Desktop",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 0
    },
    {
      "type": "header",
      "content": "Margin Top"
    },
    {
      "type": "range",
      "id": "mg_top_mobile",
      "label": "Mobile",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 40
    },
    {
      "type": "range",
      "id": "mg_top_tablet",
      "label": "Tablet",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 40
    },
    {
      "type": "range",
      "id": "mg_top_desktop",
      "label": "Desktop",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 0
    },
    {
      "type": "text",
      "id": "header",
      "label": "header"
    },
    {
      "type": "color",
      "id": "header_color",
      "label": "颜色"
    },
    {
      "type": "range",
      "id": "header_size",
      "label": "字号",
      "min": 12,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 32
    },
    {
      "type": "range",
      "id": "header_line_height",
      "label": "行高",
      "min": 12,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 36
    },
    {
      "type": "range",
      "id": "header_letter_spacing",
      "label": "字距",
      "min": -10,
      "max": 10,
      "step": 0.2,
      "unit": "px",
      "default": 0
    },
    {
      "type": "select",
      "id": "header_font_weight",
      "label": "字重",
      "options": [
        { "value": "100", "label": "100" },
        { "value": "200", "label": "200" },
        { "value": "300", "label": "300" },
        { "value": "400", "label": "400" },
        { "value": "500", "label": "500" },
        { "value": "600", "label": "600" },
        { "value": "700", "label": "700" },
        { "value": "800", "label": "800" },
        { "value": "900", "label": "900" }
      ],
      "default": "400"
    },
    {
      "type": "header",
      "content": "标题移动端配置"
    },
    {
      "type": "range",
      "id": "header_size_mo",
      "label": "字号",
      "min": 12,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 32
    },
    {
      "type": "range",
      "id": "header_line_height_mo",
      "label": "行高",
      "min": 12,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 36
    },
    {
      "type": "range",
      "id": "header_letter_spacing_mo",
      "label": "字距",
      "min": -10,
      "max": 10,
      "step": 0.2,
      "unit": "px",
      "default": 0
    },
    {
      "type": "select",
      "id": "header_font_weight_mo",
      "label": "字重",
      "options": [
        { "value": "100", "label": "100" },
        { "value": "200", "label": "200" },
        { "value": "300", "label": "300" },
        { "value": "400", "label": "400" },
        { "value": "500", "label": "500" },
        { "value": "600", "label": "600" },
        { "value": "700", "label": "700" },
        { "value": "800", "label": "800" },
        { "value": "900", "label": "900" }
      ],
      "default": "400"
    }
  ],
  "blocks": [
    {
      "type": "new-video",
      "name": "new-video",
      "limit": 3,
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "image"
        },
        {
          "type": "select",
          "id": "text_align",
          "label": "t:sections.hero-video.settings.text_align.label",
          "default": "vertical-center horizontal-center",
          "options": [
            {
              "value": "vertical-center horizontal-left",
              "label": "t:sections.hero-video.settings.text_align.options.vertical-center_horizontal-left.label"
            },
            {
              "value": "vertical-center horizontal-center",
              "label": "t:sections.hero-video.settings.text_align.options.vertical-center_horizontal-center.label"
            },
            {
              "value": "vertical-center horizontal-right",
              "label": "t:sections.hero-video.settings.text_align.options.vertical-center_horizontal-right.label"
            },
            {
              "value": "vertical-bottom horizontal-left",
              "label": "t:sections.hero-video.settings.text_align.options.vertical-bottom_horizontal-left.label"
            },
            {
              "value": "vertical-bottom horizontal-center",
              "label": "t:sections.hero-video.settings.text_align.options.vertical-bottom_horizontal-center.label"
            },
            {
              "value": "vertical-bottom horizontal-right",
              "label": "t:sections.hero-video.settings.text_align.options.vertical-bottom_horizontal-right.label"
            }
          ]
        },
        {
          "type": "text",
          "id": "video_url",
          "label": "t:sections.hero-video.settings.video_url.label",
          "default": "https://www.youtube.com/watch?v=_9VUPq3SxOc",
          "info": "t:sections.hero-video.settings.video_url.info"
        },
        {
          "type": "range",
          "id": "overlay_opacity",
          "label": "t:sections.hero-video.settings.overlay_opacity.label",
          "info": "t:sections.hero-video.settings.overlay_opacity.info",
          "default": 0,
          "min": 0,
          "max": 100,
          "step": 2,
          "unit": "%"
        },
        {
          "type": "select",
          "id": "section_height",
          "label": "t:sections.hero-video.settings.section_height.label",
          "default": "650px",
          "options": [
            {
              "label": "t:sections.hero-video.settings.section_height.options.16-9.label",
              "value": "16-9"
            },
            {
              "label": "t:sections.hero-video.settings.section_height.options.450px.label",
              "value": "450px"
            },
            {
              "label": "t:sections.hero-video.settings.section_height.options.550px.label",
              "value": "550px"
            },
            {
              "label": "t:sections.hero-video.settings.section_height.options.650px.label",
              "value": "650px"
            },
            {
              "label": "t:sections.hero-video.settings.section_height.options.750px.label",
              "value": "750px"
            },
            {
              "label": "t:sections.hero-video.settings.section_height.options.100vh.label",
              "value": "100vh"
            }
          ]
        },
        {
          "type": "select",
          "id": "mobile_height",
          "label": "t:sections.hero-video.settings.mobile_height.label",
          "default": "auto",
          "options": [
            {
              "label": "t:sections.hero-video.settings.mobile_height.options.auto.label",
              "value": "auto"
            },
            {
              "label": "t:sections.hero-video.settings.mobile_height.options.250px.label",
              "value": "250px"
            },
            {
              "label": "t:sections.hero-video.settings.mobile_height.options.300px.label",
              "value": "300px"
            },
            {
              "label": "t:sections.hero-video.settings.mobile_height.options.400px.label",
              "value": "400px"
            },
            {
              "label": "t:sections.hero-video.settings.mobile_height.options.500px.label",
              "value": "500px"
            },
            {
              "label": "t:sections.hero-video.settings.mobile_height.options.100vh.label",
              "value": "100vh"
            }
          ]
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "new-hero-video"
    }
  ],
  "disabled_on": {
    "groups": ["footer", "header", "custom.popups"]
  }
}
{% endschema %}
