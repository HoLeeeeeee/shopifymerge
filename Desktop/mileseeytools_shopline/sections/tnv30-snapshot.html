{{ assign 'secidlast' (replace section.id '-' '_') }}
{{#and section.settings.aside_bgcolor section.settings.aside_opacity }}
  <style>
    .tnv30picsnapshot-{{ secidlast }} .tnv30psboxtop-item:after{
          content: '';
    position: absolute;
    left: -1px;
    top: 0;
    width: calc(100% + 2px);
    height: 100%;
    background-color:{{ section.settings.aside_bgcolor }};
    opacity:{{divided_by section.settings.aside_opacity 100}}
    }
     .tnv30picsnapshot-{{ secidlast }} .swiper-slide-active .tnv30psboxtop-item:after{
         background-color:transparent;
     }
  </style>
{{/and}}   
<div class="tnv30picsnapshot-container">

  <div class="tnv30picsnapshot-box" id="tnv30picsnapshot-box-{{secidlast}}">
           <div class="container-ho container-ho02">
      {{#if section.settings.title '!=' '' }}
    <div class="tnv30textmedia-title animate-ele">
    {{ section.settings.title }}
    </div>
  {{/if}}
  {{#if section.settings.content '!=' '' }}
    <div class="tnv30textmedia-content animate-ele">
    {{{ section.settings.content }}}
    </div>
  {{/if}}
       </div>
    <div class="tnv30picsnapshot-boxtop">
      <div class="swiper-container tnv30picsnapshot-{{ secidlast }}">
     <div class="swiper-wrapper">
       {{#each section.blocks as |block| }}
         <div class="swiper-slide">
        <div class="tnv30psboxtop-item tnv30psboxtop-item-{{plus @index 1}}">     
          {{#if block.settings.media_type '==' 'image' }}
          <div class="tnv30textimg-wrapper">
           {{#if block.settings.image }} <img class="hide-mb" alt src="{{ image_url block.settings.image  }}"/>{{/if}}
              {{#if block.settings.image_mb }} <img class="hide-pc" alt src="{{ image_url block.settings.image_mb }}"/>{{/if}}
          </div> 
       {{ else }}
         {{ assign 'urlv' block.settings.video }}
         {{ assign 'urlvmb' block.settings.video_mb }}
         <div class="tnv30textimg-wrapper">
        <video class="playv_tnv30 hide-mb" width="100%" autoplay="autoplay" loop="loop" muted="muted" preload="metadata" webkit-playsinline="true" playsinline="true" x5-playsinline="true" x-webkit-airplay='allow' >
        <source src="{{ urlv }}"/>
        </video>
           <video class="playv_tnv30 hide-pc" width="100%" autoplay="autoplay"  loop="loop" muted="muted" preload="metadata" webkit-playsinline="true" playsinline="true" x5-playsinline="true" x-webkit-airplay='allow' >
        <source src="{{ urlvmb }}"/>
        </video>
         </div>
      {{/if}}
        </div>
         </div>
       {{/each}}
     </div>
      </div>
  
    </div>
    <div class="tnv30picsnapshot-boxbottom container-ho">
      {{#each section.blocks as |block| }}
        <div class="tnv30psboxbt-item tnv30psboxbt-item-{{plus @index 1}} {{#if @index '==' 0 }} active{{/if}}" data-index="{{plus @index 1}}" data-content="{{ escape block.settings.content }}">     
          {{#if block.settings.title }}
          <div class="tnv30picsnapshot-bbtitle">{{ block.settings.title }}</div>
          {{/if}}      
         </div>
       {{/each}}
    </div>
    
   <div class="tnv30picsnapshot-boxcontent container-ho">
     {{#each section.blocks as |block| }}
          {{#and block.settings.content @index '==' 0 }}
          <div class="tpicsnapshot-botcontent">{{ block.settings.content }}</div>
          {{/and}}      
      {{/each}}
   </div>
    
  </div> 
  

  
</div>
<script> 
    $(function(){
  var ticsnapsr_{{secidlast}} = new Swiper('.tnv30picsnapshot-{{ secidlast }}',{
    slidesPerView: 1.45,
    spaceBetween : 30,
    centeredSlides: true,
   observer: true,  
    observeParents: true,
    autoHeight: true,
    on:{
    slideChange: function(){
     let curindex = this.activeIndex + 1;
     if($(window).width() < 769){
       let firchdleft =  $("#tnv30picsnapshot-box-{{secidlast}} .tnv30psboxbt-item-1").offset().left;
     let currentleft =  $("#tnv30picsnapshot-box-{{secidlast}} .tnv30psboxbt-item-"+curindex).offset().left;
     let childoff = currentleft - firchdleft;  
    $('#tnv30picsnapshot-box-{{secidlast}} .tnv30picsnapshot-boxbottom').scrollLeft(childoff); 
     } 
     
      $(".tnv30psboxbt-item-"+curindex).addClass("active").siblings().removeClass("active");
        $("#tnv30picsnapshot-box-{{secidlast}} .tpicsnapshot-botcontent").html($("#tnv30picsnapshot-box-{{secidlast}} .tnv30psboxbt-item-"+curindex).data("content"));
        if($(".tnv30psboxtop-item-"+curindex).find("video.playv_tnv30").length){
          $(".tnv30picsnapshot-{{ secidlast }} .playv_tnv30").trigger('pause');
          $(".tnv30psboxtop-item-"+curindex).find(".playv_tnv30")[0].currentTime = 0;
          $(".tnv30psboxtop-item-"+curindex).find(".playv_tnv30").trigger('play');
        }else{
           $(".tnv30picsnapshot-{{ secidlast }} .playv_tnv30").trigger('pause');
        }
    }
  },
    breakpoints: {
      1550: {  
        slidesPerView: 1.45,
        spaceBetween: 20
      },
      1200: {  
        slidesPerView: 1.2,
        spaceBetween: 20
      },
      550: {  
        slidesPerView: 1.1,
        spaceBetween: 0
      },
      50: {  
        slidesPerView: 1,
        spaceBetween: 0
      }
    }

    
  });


    if($(window).width() > 768){
      $(".playv_tnv30.hide-pc").remove();
    }else{
      $(".playv_tnv30.hide-mb").remove();
    }
    $(".tnv30psboxbt-item").each(function(){
      $(this).click(function(){       
       ticsnapsr_{{secidlast}}.slideTo($(this).data("index") - 1); 
      });
    });

       // ticsnapsr_{{secidlast}}.slideTo(1);
  });
</script> 
{{#schema}}
  {
    "name": "Picture Snapshot",
    "settings": [
      {
        "type":"color",
        "id":"aside_bgcolor",
        "label":"Aside Bgcolor",
        "default":"#000"
      },
      {
        "id": "aside_opacity",
        "type": "range",
        "label": "Opacity",
        "default": 100,
        "min": 0,
        "max": 100,
        "step": 1
      },{
          "type": "text",
          "id": "title",
          "label": "Title"
      },
      {
          "type": "richtext",
          "id": "content",
          "label": "content"
      }
	],
    "blocks": [
        {
            "type": "item",
            "name": "item",
            "settings": [
                    {
                  "type": "select",
                  "id": "media_type",
                  "label": "Media Type",
                  "options": [
                    {
                      "value": "image",
                      "label": "Image"
                    },{
                      "value": "video",
                      "label": "Video"
                    }
                  ],
                  "default": "image"
                },{
                    "type": "video_text",
                    "id": "video",
                    "format": "video",
                    "label": "video"
                    },{
                    "type": "video_text",
                    "id": "video_mb",
                    "format": "video",
                    "label": "video(mobile)"
                    },{
                  "type":"image_picker",
                  "id":"image",
                  "label":"Image"
                },{
                  "type":"image_picker",
                  "id":"image_mb",
                  "label":"Image(mobile)"
                },{
                    "type": "text",
                    "id": "title",
                    "label": "Title"
                },
                {
                    "type": "richtext",
                    "id": "content",
                    "label": "content"
                }
            ]
        }
    ],
	"presets": [
      {
        "name": "Picture Snapshot","category": "Ho-Advance"
      }
    ]
  }
{{/schema}}